{
  "id": 2,
  "name": "Subway Platform",
  "background": {
    "type": "segmented",
    "dir": "assets/backgrounds/level_2_segments",
    "metadata": "assets/backgrounds/level_2_segments/metadata.json"
  },
  "world": { "top": 350, "bottom": 491 },
  "spawn": { "x": 290, "y": 410 },
  "audio": { 
    "music": "casinoMusic",
    "musicVolume": 0.5,
    "ambiance": "subwayAmbiance",
    "ambianceVolume": 0.1,
    "subwayPassingVolume": 0.1
  },
  "enemies": {
    "spawnRate": 700,
    "max": 7,
    "types": ["crackhead"],
    "multipliers": { "health": 1.0, "damage": 1.0 }
  },
  "extras": [
    { "name": "misfit" },
    { "name": "train_front" },
    { "name": "train_middle" },
    { "name": "subwaycar" }
  ],
  "events": [
    {
      "id": "level_2_intro",
      "trigger": { "type": "position", "value": 290, "tolerance": 40, "once": true },
      "actions": [
        { "type": "pause", "targets": ["player", "enemies"] },
        { "type": "camera", "stopFollow": true },
        { "type": "spawnExtra", "name": "misfit", "position": { "x": 490, "y": 390 }, "id": "extra_misfit", "matchPlayer": false, "multiplier": 1.0 },
        { "type": "dialogue", "dialogue": { "speaker": "Misfit", "text": "Yo... I saw The Critic run this way!" } },
        { "type": "dialogue", "dialogue": { "speaker": "Misfit", "text": "He must be hiding out on the platform..." } },
        { "type": "dialogue", "dialogue": { "speaker": "Misfit", "text": "Stay sharp." } },
        { "type": "destroyExtra", "target": "extra_misfit" },
        { "type": "camera", "follow": "player" },
        { "type": "resume", "targets": ["player", "enemies"] }
      ]
    },
    {
      "id": "level_2_subway_car",
      "trigger": { "type": "position", "value": 800, "tolerance": 50, "once": true },
      "actions": [
        { "type": "spawnSubwayCarCycle" }
      ]
    },
    {
      "id": "level_2_boss_arena",
      "trigger": { "type": "position", "value": 7109, "tolerance": 20, "once": true },
      "actions": [
        { "type": "pause", "targets": ["player", "enemies"] },
        { "type": "camera", "stopFollow": true },
        { "type": "stopEnemySpawning", "clearEnemies": true },
        { "type": "stopSubwayCarCycle" },
        { "type": "clearEnemiesOffscreen", "xThreshold": 6800, "direction": "right", "excludeIds": ["boss_critic"] },
        { "type": "spawnBoss", "bossType": "critic", "position": { "x": 7760, "y": 425 }, "id": "boss_critic" },
        { "type": "playMusic", "musicKey": "staminaMusic" },
        { "type": "camera", "pan": { "x": 6803, "duration": 2000, "ease": "Power2" } },
        { "type": "camera", "setBounds": { "x": 6803, "y": 0, "width": 2400, "height": 720 } },
        { "type": "wait", "duration": 500 },
        { "type": "setDialogueStyle", "position": { "x": 640, "y": 600 }, "textSizes": { "speaker": 35, "message": 35 } },
        { "type": "dialogue", "dialogue": { "speaker": "The Critic", "text": "Stop! You have no idea who you're messing with..." } },
        { "type": "dialogue", "dialogue": { "speaker": "The Critic", "text": "If you want to keep your life, you'll leave me alone..." } },
        { "type": "dialogue", "dialogue": { "speaker": "The Critic", "text": "My bad ratings will ruin your career!" } },
        { "type": "showBossHealthBar", "bossId": "boss_critic" },
        { "type": "setPlayerBounds", "bounds": { "minX": 6803, "maxX": 8003, "minY": 350, "maxY": 527 } },
        { "type": "wait", "duration": 500 },
        { "type": "resume", "targets": ["player", "enemies"] },
        { "type": "waitForBossDefeated", "bossId": "boss_critic" },
        { "type": "pause", "targets": ["player", "enemies"] },
        { "type": "wait", "duration": 500 },
        { "type": "dialogue", "dialogue": { "speaker": "The Critic", "text": "You dont understand..." } },
        { "type": "dialogue", "dialogue": { "speaker": "The Critic", "text": "I'm not the one you're looking for..." } },
        { "type": "dialogue", "dialogue": { "speaker": "The Critic", "text": "I already handed over the album. I'm sorry..." } },
        { "type": "dialogue", "dialogue": { "speaker": "The Critic", "text": "Listen, there is a bigger threat coming..." } },
        { "type": "dialogue", "dialogue": { "speaker": "The Critic", "text": "**The Negatives** -- a secret weapon..." } },
        { "type": "dialogue", "dialogue": { "speaker": "The Critic", "text": "and they will stop at nothing to see you dead!" } },
        { "type": "dialogue", "dialogue": { "speaker": "The Critic", "text": "You need to find them before they find you..." } },
        { "type": "wait", "duration": 500 },
        { "type": "setDialogueStyle", "position": { "x": 640, "y": 360 }, "size": { "width": 700, "height": 200 }, "textSizes": { "speaker": 40, "message": 35 }, "wordWrapWidth": 660 },
        { "type": "dialogue", "dialogue": { "speaker": "", "text": "The Critic falls defeated on the platform. The path forward is clear." } },
        { "type": "dialogue", "dialogue": { "speaker": "", "text": "Find and eliminate The Negatives before they find you..." } },
        { "type": "loadLevel", "levelId": 3 }
      ]
    }
  ],
  "assets": {
    "images": []
  }
}


