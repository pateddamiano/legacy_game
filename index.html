<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phaser 3 Character Movement Game</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #2c3e50;
            font-family: Arial, sans-serif;
        }
        
        #game-container {
            border: 2px solid #34495e;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
        
        .controls {
            color: white;
            text-align: center;
            margin-top: 10px;
            font-size: 14px;
        }
        
        /* Loading dots animation */
        @keyframes dotSequence {
            0%, 100% { opacity: 1; }
            33% { opacity: 0.3; }
            66% { opacity: 0.6; }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" style="
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: #0f0f23;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        color: #00ff00;
        font-family: 'Courier New', monospace;
    ">
                        <!-- Spinning Vinyl Record (Canvas Animation) -->
                <div id="vinyl-loader" style="
                    width: 120px;
                    height: 120px;
                    margin-bottom: 40px;
                    position: relative;
                ">
                    <canvas id="vinyl-canvas" width="120" height="120" style="
                        image-rendering: pixelated;
                        image-rendering: -moz-crisp-edges;
                        image-rendering: crisp-edges;
                    "></canvas>
                </div>
        
        <!-- 8-bit Loading Text -->
        <div id="loading-text-8bit" style="
            font-size: 2em;
            font-weight: bold;
            text-shadow: 2px 2px 0px #004400;
            margin-bottom: 20px;
            letter-spacing: 3px;
        ">
            LOADING<span id="loading-dots-8bit">...</span>
        </div>
        
        <!-- Yellow ++ -->
        <div id="loading-plus" style="
            font-size: 1.5em;
            color: #ffff00;
            font-weight: bold;
            text-shadow: 2px 2px 0px #666600;
        ">
            ++
        </div>
            </div>
    
        <!-- Vinyl Animation Script -->
        <script>
        // Canvas-based vinyl animation using spritesheet approach
        function initVinylAnimation() {
            const canvas = document.getElementById('vinyl-canvas');
            const ctx = canvas.getContext('2d');
            const img = new Image();
            
            let currentFrame = 0;
            const totalFrames = 4;
            const frameWidth = 64;
            const frameHeight = 64;
            const canvasSize = 120;
            
            img.onload = function() {
                // Start animation
                setInterval(() => {
                    // Clear canvas
                    ctx.clearRect(0, 0, canvasSize, canvasSize);
                    
                    // Draw current frame
                    ctx.drawImage(
                        img,
                        0, currentFrame * frameHeight, // Source x, y
                        frameWidth, frameHeight,       // Source width, height
                        0, 0,                          // Dest x, y
                        canvasSize, canvasSize         // Dest width, height (scaled)
                    );
                    
                    // Move to next frame
                    currentFrame = (currentFrame + 1) % totalFrames;
                }, 250); // 4 FPS like a proper retro game
            };
            
            img.src = 'assets/weapons/spritesheets/vinyl weapon spinning.png';
        }
        
        // Start animation when page loads
        initVinylAnimation();
        </script>
    
        <div>
            <div id="game-container"></div>
        <div class="controls">
            <strong>Movement:</strong> Arrow keys ← → ↑ ↓ | <strong>Jump:</strong> SPACEBAR<br>
            <strong>Combat:</strong> X = attack combo (jab → cross → kick) | Q = throw vinyl weapon<br>
            <strong>Character:</strong> C = switch character | H = heal<br>
            <strong>System:</strong> D = debug mode | K = clear enemies | M = music | N = SFX
        </div>
    </div>
    
    <!-- Phaser 3 CDN -->
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.70.0/dist/phaser.min.js"></script>
    
    <!-- Modular Game Scripts - Load in dependency order -->
    <script src="characters.js?v=5.7.0"></script>
    <script src="animation-manager.js?v=5.7.0"></script>
    <script src="audio-manager.js?v=5.7.0"></script>
    <script src="ui-manager.js?v=6.3.0"></script>
    <script src="environment-manager.js?v=5.7.0"></script>
    <script src="input-manager.js?v=5.7.0"></script>
    <script src="weapon-system.js?v=5.7.0"></script>
    <script src="enemy-system.js?v=5.7.0"></script>
    <script src="item-pickup-system.js?v=6.4.0"></script>
    <script src="game-scene.js?v=6.1.0"></script>
    <script src="game.js?v=6.1.0"></script>
</body>
</html> 